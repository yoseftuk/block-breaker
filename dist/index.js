(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";var BlockTypes,SpeedModes;Object.defineProperty(exports,"__esModule",{value:!0}),exports.SpeedModes=exports.BlockTypes=exports.GRAVITY=exports.CANVAS_HEIGHT=exports.CANVAS_WIDTH=void 0,exports.CANVAS_WIDTH=1e3,exports.CANVAS_HEIGHT=1e3,exports.GRAVITY=.15,function(e){e[e.GREEN=0]="GREEN",e[e.YELLOW=1]="YELLOW",e[e.RED=2]="RED"}(BlockTypes=exports.BlockTypes||(exports.BlockTypes={})),function(e){e[e.REGULAR=0]="REGULAR",e[e.HIGH_SPEED=1]="HIGH_SPEED"}(SpeedModes=exports.SpeedModes||(exports.SpeedModes={}));

},{}],2:[function(require,module,exports){
"use strict";var __importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});var renderer_1=__importDefault(require("./managers/renderer")),keyboard_1=require("./managers/keyboard"),dom_1=require("./managers/dom"),renderer=new renderer_1.default(dom_1.canvas);keyboard_1.initKeyboard(),renderer.start();

},{"./managers/dom":7,"./managers/keyboard":8,"./managers/renderer":9}],3:[function(require,module,exports){
"use strict";var __read=this&&this.__read||function(r,e){var t="function"==typeof Symbol&&r[Symbol.iterator];if(!t)return r;var o,n,a=t.call(r),c=[];try{for(;(void 0===e||e-- >0)&&!(o=a.next()).done;)c.push(o.value)}catch(r){n={error:r}}finally{try{o&&!o.done&&(t=a.return)&&t.call(a)}finally{if(n)throw n.error}}return c},__spread=this&&this.__spread||function(){for(var r=[],e=0;e<arguments.length;e++)r=r.concat(__read(arguments[e]));return r},__importDefault=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(exports,"__esModule",{value:!0});var block_1=__importDefault(require("../models/block")),consts_1=require("../consts"),Level1=function(){return __spread(Array.from(Array(15),function(r,e){return new block_1.default(2+2*e,5,consts_1.BlockTypes.GREEN)}),Array.from(Array(14),function(r,e){return new block_1.default(3+2*e,6,consts_1.BlockTypes.YELLOW)}),Array.from(Array(15),function(r,e){return new block_1.default(2+2*e,7,consts_1.BlockTypes.GREEN)}),Array.from(Array(14),function(r,e){return new block_1.default(3+2*e,8,consts_1.BlockTypes.YELLOW)}),Array.from(Array(15),function(r,e){return new block_1.default(2+2*e,9,consts_1.BlockTypes.GREEN)}),Array.from(Array(14),function(r,e){return new block_1.default(3+2*e,10,consts_1.BlockTypes.YELLOW)}),Array.from(Array(15),function(r,e){return new block_1.default(2+2*e,11,consts_1.BlockTypes.GREEN)}),Array.from(Array(14),function(r,e){return new block_1.default(3+2*e,12,consts_1.BlockTypes.YELLOW)}))};exports.default=Level1;

},{"../consts":1,"../models/block":11}],4:[function(require,module,exports){
"use strict";var __read=this&&this.__read||function(r,e){var t="function"==typeof Symbol&&r[Symbol.iterator];if(!t)return r;var o,n,a=t.call(r),l=[];try{for(;(void 0===e||e-- >0)&&!(o=a.next()).done;)l.push(o.value)}catch(r){n={error:r}}finally{try{o&&!o.done&&(t=a.return)&&t.call(a)}finally{if(n)throw n.error}}return l},__spread=this&&this.__spread||function(){for(var r=[],e=0;e<arguments.length;e++)r=r.concat(__read(arguments[e]));return r},__importDefault=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(exports,"__esModule",{value:!0});var block_1=__importDefault(require("../models/block")),consts_1=require("../consts"),Level2=function(){return __spread(Array.from(Array(15),function(r,e){return new block_1.default(2+e,e,consts_1.BlockTypes.RED)}),Array.from(Array(15),function(r,e){return new block_1.default(17+e,14-e,consts_1.BlockTypes.RED)}),Array.from(Array(14),function(r,e){return new block_1.default(3+e,e,consts_1.BlockTypes.YELLOW)}),Array.from(Array(14),function(r,e){return new block_1.default(17+e,13-e,consts_1.BlockTypes.YELLOW)}),Array.from(Array(15),function(r,e){return new block_1.default(2+2*e,15,consts_1.BlockTypes.GREEN)}))};exports.default=Level2;

},{"../consts":1,"../models/block":11}],5:[function(require,module,exports){
"use strict";var __read=this&&this.__read||function(r,e){var t="function"==typeof Symbol&&r[Symbol.iterator];if(!t)return r;var o,n,c=t.call(r),a=[];try{for(;(void 0===e||e-- >0)&&!(o=c.next()).done;)a.push(o.value)}catch(r){n={error:r}}finally{try{o&&!o.done&&(t=c.return)&&t.call(c)}finally{if(n)throw n.error}}return a},__spread=this&&this.__spread||function(){for(var r=[],e=0;e<arguments.length;e++)r=r.concat(__read(arguments[e]));return r},__importDefault=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(exports,"__esModule",{value:!0});var block_1=__importDefault(require("../models/block")),consts_1=require("../consts"),Level3=function(){return __spread(Array.from(Array(15),function(r,e){return new block_1.default(2+e,17-e,consts_1.BlockTypes.RED)}),Array.from(Array(15),function(r,e){return new block_1.default(17+e,2+e,consts_1.BlockTypes.RED)}),Array.from(Array(13),function(r,e){return new block_1.default(4+e,17-e,consts_1.BlockTypes.YELLOW)}),Array.from(Array(13),function(r,e){return new block_1.default(17+e,4+e,consts_1.BlockTypes.YELLOW)}),Array.from(Array(9),function(r,e){return new block_1.default(8+e,17-e,consts_1.BlockTypes.RED)}),Array.from(Array(9),function(r,e){return new block_1.default(17+e,8+e,consts_1.BlockTypes.RED)}),Array.from(Array(7),function(r,e){return new block_1.default(10+e,17-e,consts_1.BlockTypes.YELLOW)}),Array.from(Array(7),function(r,e){return new block_1.default(17+e,10+e,consts_1.BlockTypes.YELLOW)}),Array.from(Array(4),function(r,e){return new block_1.default(3+e%2,+(e<2)+3,consts_1.BlockTypes.GREEN)}),Array.from(Array(4),function(r,e){return new block_1.default(29+e%2,+(e<2)+3,consts_1.BlockTypes.GREEN)}))};exports.default=Level3;

},{"../consts":1,"../models/block":11}],6:[function(require,module,exports){
"use strict";var __importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});var level1_1=__importDefault(require("./level1")),level2_1=__importDefault(require("./level2")),level3_1=__importDefault(require("./level3")),LEVELS=[level1_1.default,level2_1.default,level3_1.default];exports.default=LEVELS;

},{"./level1":3,"./level2":4,"./level3":5}],7:[function(require,module,exports){
"use strict";var __importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.newGame=exports.gameOver=exports.isGameOver=exports.canvas=void 0;var ball_1=__importDefault(require("../models/ball")),plank_1=__importDefault(require("../models/plank")),rect_1=__importDefault(require("../models/rect")),consts_1=require("../consts"),renderer_1=__importDefault(require("./renderer")),levels_1=__importDefault(require("../levels/levels"));exports.canvas=document.querySelector("canvas");var gameOverEl=document.querySelector("#game-over"),_isGameOver=!1;exports.isGameOver=function(){return _isGameOver},exports.gameOver=function(){gameOverEl.style.display="",_isGameOver=!0},exports.newGame=function(){_isGameOver=!1,gameOverEl.style.display="none",ball_1.default.x=500,ball_1.default.y=500,ball_1.default.speedY=ball_1.default.speedYAt(ball_1.default.y),ball_1.default.speedX=0,plank_1.default.rect=new rect_1.default(consts_1.CANVAS_WIDTH/2-95,consts_1.CANVAS_HEIGHT-90,190,18),renderer_1.default.activeLevel=levels_1.default[renderer_1.default.levelIdx]()};

},{"../consts":1,"../levels/levels":6,"../models/ball":10,"../models/plank":12,"../models/rect":13,"./renderer":9}],8:[function(require,module,exports){
"use strict";var __importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.initKeyboard=void 0;var plank_1=__importDefault(require("../models/plank")),ball_1=__importDefault(require("../models/ball")),consts_1=require("../consts"),dom_1=require("./dom");exports.initKeyboard=function(){document.addEventListener("keydown",function(e){switch(e.code){case"ArrowRight":plank_1.default.speed=plank_1.default.SPEED;break;case"ArrowLeft":plank_1.default.speed=-plank_1.default.SPEED;break;case"ArrowUp":ball_1.default.speedMode=consts_1.SpeedModes.HIGH_SPEED;break;case"Space":dom_1.isGameOver()&&dom_1.newGame()}}),document.addEventListener("keyup",function(e){switch(e.code){case"ArrowRight":plank_1.default.speed===plank_1.default.SPEED&&(plank_1.default.speed=0);break;case"ArrowLeft":plank_1.default.speed===-plank_1.default.SPEED&&(plank_1.default.speed=0);break;case"ArrowUp":ball_1.default.speedMode=consts_1.SpeedModes.REGULAR}})};

},{"../consts":1,"../models/ball":10,"../models/plank":12,"./dom":7}],9:[function(require,module,exports){
"use strict";var __values=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,l=t&&e[t],a=0;if(l)return l.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&a>=e.length&&(e=void 0),{value:e&&e[a++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},__importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});var ball_1=__importDefault(require("../models/ball")),plank_1=__importDefault(require("../models/plank")),consts_1=require("../consts"),levels_1=__importDefault(require("../levels/levels")),dom_1=require("./dom"),Renderer=function(){function e(t){this.run=!1,this.imgMemo={},this.canvas=t,this.canvas.width=consts_1.CANVAS_WIDTH,this.canvas.height=consts_1.CANVAS_HEIGHT,this.ctx=this.canvas.getContext("2d"),e.activeLevel=levels_1.default[e.levelIdx]()}return e.prototype.start=function(){this.run=!0,this.renderLoop()},e.prototype.pause=function(){this.run=!1},e.prototype.renderLoop=function(){this.run&&(this.drawBall(),this.drawPlank(),this.drawBlocks(),requestAnimationFrame(this.renderLoop.bind(this)))},e.prototype.drawBall=function(){ball_1.default.move(),ball_1.default.speedMode==consts_1.SpeedModes.HIGH_SPEED&&ball_1.default.move(),ball_1.default.y>consts_1.CANVAS_HEIGHT&&dom_1.gameOver(),this.ctx.beginPath(),this.ctx.clearRect(0,0,consts_1.CANVAS_WIDTH,consts_1.CANVAS_HEIGHT),this.ctx.fillStyle=ball_1.default.COLOR,this.ctx.arc(ball_1.default.x,ball_1.default.y,ball_1.default.RADIUS,0,2*Math.PI),this.ctx.fill(),this.ctx.closePath()},e.prototype.drawPlank=function(){plank_1.default.move(),this.ctx.beginPath(),this.ctx.fillStyle=plank_1.default.COLOR,this.ctx.fillRect(plank_1.default.rect.left(),plank_1.default.rect.top(),plank_1.default.rect.width(),plank_1.default.rect.height()),this.ctx.closePath(),ball_1.default.checkHit(plank_1.default.rect)&&(ball_1.default.y=plank_1.default.rect.top()-ball_1.default.RADIUS,ball_1.default.speedY=-ball_1.default.speedYAt(ball_1.default.y)-consts_1.GRAVITY,ball_1.default.speedX+=Math.sign(plank_1.default.speed))},e.prototype.drawBlocks=function(){var t,l,a=this,r=!0,o=function(e){if(e.progress>e.type)return"continue";r=!1,n.loadImage(e.src()).then(function(t){var l=e.rect;a.ctx.drawImage(t,l.left(),l.top(),l.width(),l.height()),ball_1.default.checkHit(l)&&(e.progress++,ball_1.default.y-l.top()<ball_1.default.x-l.left()&&ball_1.default.y-l.top()<l.right()-ball_1.default.x||l.bottom()-ball_1.default.y<ball_1.default.x-l.left()&&l.bottom()-ball_1.default.y<l.right()-ball_1.default.x?ball_1.default.speedY=-1*ball_1.default.speedY-consts_1.GRAVITY:ball_1.default.speedX*=-1)})},n=this;try{for(var i=__values(e.activeLevel),s=i.next();!s.done;s=i.next()){o(s.value)}}catch(e){t={error:e}}finally{try{s&&!s.done&&(l=i.return)&&l.call(i)}finally{if(t)throw t.error}}r&&(e.levelIdx=(e.levelIdx+1)%levels_1.default.length,e.activeLevel=levels_1.default[e.levelIdx]())},e.prototype.loadImage=function(e){var t=this;return new Promise(function(l,a){if(t.imgMemo[e])l(t.imgMemo[e]);else{var r=new Image;r.onload=function(){t.imgMemo[e]=r,l(r)},r.onerror=function(){return a("image not loaded")},r.src=e}})},e.levelIdx=0,e}();exports.default=Renderer;

},{"../consts":1,"../levels/levels":6,"../models/ball":10,"../models/plank":12,"./dom":7}],10:[function(require,module,exports){
"use strict";var __importDefault=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0});var consts_1=require("../consts"),rect_1=__importDefault(require("./rect")),Ball=function(){function t(t,s){this.RADIUS=15,this.COLOR="#ffffff",this.speedX=0,this.speedY=0,this.speedMode=consts_1.SpeedModes.REGULAR,this.x=t,this.y=s,this.speedY=this.speedYAt(s)}return t.prototype.move=function(){this.speedY+=consts_1.GRAVITY,this.x+=this.speedX,this.y+=this.speedY,this.x+this.RADIUS>=consts_1.CANVAS_WIDTH?(this.x=consts_1.CANVAS_WIDTH-this.RADIUS,this.speedX*=-1):this.x-this.RADIUS<=0&&(this.x=this.RADIUS,this.speedX*=-1)},t.prototype.checkHit=function(t){return t=new rect_1.default(t.left()-this.RADIUS,t.top()-this.RADIUS,t.width()+2*this.RADIUS,t.height()+2*this.RADIUS),this.x>t.left()&&this.x<t.right()&&this.y>t.top()&&this.y<t.bottom()},t.prototype.speedYAt=function(t){return Math.sqrt(2*(t-this.RADIUS)/consts_1.GRAVITY)*consts_1.GRAVITY},t}();exports.default=new Ball(500,500);

},{"../consts":1,"./rect":13}],11:[function(require,module,exports){
"use strict";var __importDefault=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0});var rect_1=__importDefault(require("./rect")),Block=function(){function t(e,r,o){this.progress=0,this.rect=new rect_1.default(e*t.WIDTH,r*t.WIDTH,t.WIDTH,t.WIDTH),this.type=o,this.name=["green","yellow","red"][o]}return t.prototype.hit=function(){this.progress++},t.prototype.src=function(){return"./media/block."+this.name+"."+(this.progress+1)+".png"},t.WIDTH=30,t}();exports.default=Block;

},{"./rect":13}],12:[function(require,module,exports){
"use strict";var __importDefault=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0});var consts_1=require("../consts"),rect_1=__importDefault(require("./rect")),Plank=function(){function t(){this.COLOR="#83f0eb",this.SPEED=16,this.speed=0,this.rect=new rect_1.default(consts_1.CANVAS_WIDTH/2-95,consts_1.CANVAS_HEIGHT-90,190,18)}return t.prototype.move=function(){this.rect.setLeft(Math.min(Math.max(0,this.rect.left()+this.speed),consts_1.CANVAS_WIDTH-this.rect.width()))},t}();exports.default=new Plank;

},{"../consts":1,"./rect":13}],13:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var Rect=function(){function t(t,o,e,i){this.x=t,this.y=o,this.w=e,this.h=i}return t.prototype.top=function(){return this.y},t.prototype.left=function(){return this.x},t.prototype.right=function(){return this.x+this.w},t.prototype.bottom=function(){return this.y+this.h},t.prototype.width=function(){return this.w},t.prototype.height=function(){return this.h},t.prototype.setTop=function(t){this.y=t},t.prototype.setLeft=function(t){this.x=t},t.prototype.setBottom=function(t){this.y=t-this.h},t.prototype.setRight=function(t){this.x=t-this.w},t.prototype.setWidth=function(t){this.w=t},t.prototype.setHeight=function(t){this.h=t},t}();exports.default=Rect;

},{}]},{},[2])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvY29uc3RzLnRzIiwic3JjL2luZGV4LnRzIiwic3JjL2xldmVscy9sZXZlbDEudHMiLCJzcmMvbGV2ZWxzL2xldmVsMi50cyIsInNyYy9sZXZlbHMvbGV2ZWwzLnRzIiwic3JjL2xldmVscy9sZXZlbHMudHMiLCJzcmMvbWFuYWdlcnMvZG9tLnRzIiwic3JjL21hbmFnZXJzL2tleWJvYXJkLnRzIiwic3JjL21hbmFnZXJzL3JlbmRlcmVyLnRzIiwic3JjL21vZGVscy9iYWxsLnRzIiwic3JjL21vZGVscy9ibG9jay50cyIsInNyYy9tb2RlbHMvcGxhbmsudHMiLCJzcmMvbW9kZWxzL3JlY3QudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7YUNHQSxJQUFZLFdBS0EsMEtBUkMsUUFBQSxhQUFlLElBQ2YsUUFBQSxjQUFnQixJQUNoQixRQUFBLFFBQVUsSUFDdkIsU0FBWSxHQUNSLEVBQUEsRUFBQSxNQUFBLEdBQUEsUUFDQSxFQUFBLEVBQUEsT0FBQSxHQUFBLFNBQ0EsRUFBQSxFQUFBLElBQUEsR0FBQSxNQUhKLENBQVksV0FBQSxRQUFBLGFBQUEsUUFBQSxXQUFVLEtBS3RCLFNBQVksR0FDUixFQUFBLEVBQUEsUUFBQSxHQUFBLFVBQ0EsRUFBQSxFQUFBLFdBQUEsR0FBQSxhQUZKLENBQVksV0FBQSxRQUFBLGFBQUEsUUFBQSxXQUFVOzs7c0tDUnRCLElBQUEsV0FBQSxnQkFBQSxRQUFBLHdCQUNBLFdBQUEsUUFBQSx1QkFDQSxNQUFBLFFBQUEsa0JBQ00sU0FBcUIsSUFBSSxXQUFBLFFBQVMsTUFBQSxRQUN4QyxXQUFBLGVBQ0EsU0FBUzs7O29sQkNMVCxJQUFBLFFBQUEsZ0JBQUEsUUFBQSxvQkFDQSxTQUFBLFFBQUEsYUFFTSxPQUFzQixXQUFNLE9BQUEsU0FDM0IsTUFBTSxLQUFLLE1BQU0sSUFBSyxTQUFDLEVBQUcsR0FBYyxPQUFBLElBQUksUUFBQSxRQUFN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LFVBQUEsTUFBQSxXQUNJLE9BQU8sS0FBSyxFQUFJLEtBQUssR0FFekIsRUFBQSxVQUFBLE9BQUEsV0FDSSxPQUFPLEtBQUssRUFBSSxLQUFLLEdBRXpCLEVBQUEsVUFBQSxNQUFBLFdBQ0ksT0FBTyxLQUFLLEdBRWhCLEVBQUEsVUFBQSxPQUFBLFdBQ0ksT0FBTyxLQUFLLEdBRWhCLEVBQUEsVUFBQSxPQUFBLFNBQU8sR0FDSCxLQUFLLEVBQUksR0FFYixFQUFBLFVBQUEsUUFBQSxTQUFRLEdBQ0osS0FBSyxFQUFJLEdBRWIsRUFBQSxVQUFBLFVBQUEsU0FBVSxHQUNOLEtBQUssRUFBSSxFQUFTLEtBQUssR0FFM0IsRUFBQSxVQUFBLFNBQUEsU0FBUyxHQUNMLEtBQUssRUFBSSxFQUFRLEtBQUssR0FFMUIsRUFBQSxVQUFBLFNBQUEsU0FBUyxHQUNMLEtBQUssRUFBSSxHQUViLEVBQUEsVUFBQSxVQUFBLFNBQVUsR0FDTixLQUFLLEVBQUksR0FFakIsRUEvQ0EiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigpe2Z1bmN0aW9uIHIoZSxuLHQpe2Z1bmN0aW9uIG8oaSxmKXtpZighbltpXSl7aWYoIWVbaV0pe3ZhciBjPVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmU7aWYoIWYmJmMpcmV0dXJuIGMoaSwhMCk7aWYodSlyZXR1cm4gdShpLCEwKTt2YXIgYT1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK2krXCInXCIpO3Rocm93IGEuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixhfXZhciBwPW5baV09e2V4cG9ydHM6e319O2VbaV1bMF0uY2FsbChwLmV4cG9ydHMsZnVuY3Rpb24ocil7dmFyIG49ZVtpXVsxXVtyXTtyZXR1cm4gbyhufHxyKX0scCxwLmV4cG9ydHMscixlLG4sdCl9cmV0dXJuIG5baV0uZXhwb3J0c31mb3IodmFyIHU9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZSxpPTA7aTx0Lmxlbmd0aDtpKyspbyh0W2ldKTtyZXR1cm4gb31yZXR1cm4gcn0pKCkiLCJleHBvcnQgY29uc3QgQ0FOVkFTX1dJRFRIID0gMTAwMDtcclxuZXhwb3J0IGNvbnN0IENBTlZBU19IRUlHSFQgPSAxMDAwO1xyXG5leHBvcnQgY29uc3QgR1JBVklUWSA9IC4xNTtcclxuZXhwb3J0IGVudW0gQmxvY2tUeXBlcyB7XHJcbiAgICBHUkVFTixcclxuICAgIFlFTExPVyxcclxuICAgIFJFRFxyXG59XHJcbmV4cG9ydCBlbnVtIFNwZWVkTW9kZXMge1xyXG4gICAgUkVHVUxBUixcclxuICAgIEhJR0hfU1BFRURcclxufVxyXG4iLCJpbXBvcnQgUmVuZGVyZXIgZnJvbSAnLi9tYW5hZ2Vycy9yZW5kZXJlcic7XHJcbmltcG9ydCB7aW5pdEtleWJvYXJkfSBmcm9tIFwiLi9tYW5hZ2Vycy9rZXlib2FyZFwiO1xyXG5pbXBvcnQge2NhbnZhc30gZnJvbSBcIi4vbWFuYWdlcnMvZG9tXCI7XHJcbmNvbnN0IHJlbmRlcmVyOiBSZW5kZXJlciA9IG5ldyBSZW5kZXJlcihjYW52YXMpO1xyXG5pbml0S2V5Ym9hcmQoKTtcclxucmVuZGVyZXIuc3RhcnQoKTtcclxuIiwiaW1wb3J0IEJsb2NrIGZyb20gXCIuLi9tb2RlbHMvYmxvY2tcIjtcclxuaW1wb3J0IHtCbG9ja1R5cGVzfSBmcm9tIFwiLi4vY29uc3RzXCI7XHJcblxyXG5jb25zdCBMZXZlbDE6ICgpPT5CbG9ja1tdID0gKCkgPT4gW1xyXG4gICAgLi4uQXJyYXkuZnJvbShBcnJheSgxNSksICh2LCBpOiBudW1iZXIpID0+IG5ldyBCbG9jaygyICsgaSAqIDIsIDUsIEJsb2NrVHlwZXMuR1JFRU4pKSxcclxuICAgIC4uLkFycmF5LmZyb20oQXJyYXkoMTQpLCAodiwgaTogbnVtYmVyKSA9PiBuZXcgQmxvY2soMyArIGkgKiAyLCA2LCBCbG9ja1R5cGVzLllFTExPVykpLFxyXG4gICAgLi4uQXJyYXkuZnJvbShBcnJheSgxNSksICh2LCBpOiBudW1iZXIpID0+IG5ldyBCbG9jaygyICsgaSAqIDIsIDcsIEJsb2NrVHlwZXMuR1JFRU4pKSxcclxuICAgIC4uLkFycmF5LmZyb20oQXJyYXkoMTQpLCAodiwgaTogbnVtYmVyKSA9PiBuZXcgQmxvY2soMyArIGkgKiAyLCA4LCBCbG9ja1R5cGVzLllFTExPVykpLFxyXG4gICAgLi4uQXJyYXkuZnJvbShBcnJheSgxNSksICh2LCBpOiBudW1iZXIpID0+IG5ldyBCbG9jaygyICsgaSAqIDIsIDksIEJsb2NrVHlwZXMuR1JFRU4pKSxcclxuICAgIC4uLkFycmF5LmZyb20oQXJyYXkoMTQpLCAodiwgaTogbnVtYmVyKSA9PiBuZXcgQmxvY2soMyArIGkgKiAyLCAxMCwgQmxvY2tUeXBlcy5ZRUxMT1cpKSxcclxuICAgIC4uLkFycmF5LmZyb20oQXJyYXkoMTUpLCAodiwgaTogbnVtYmVyKSA9PiBuZXcgQmxvY2soMiArIGkgKiAyLCAxMSwgQmxvY2tUeXBlcy5HUkVFTikpLFxyXG4gICAgLi4uQXJyYXkuZnJvbShBcnJheSgxNCksICh2LCBpOiBudW1iZXIpID0+IG5ldyBCbG9jaygzICsgaSAqIDIsIDEyLCBCbG9ja1R5cGVzLllFTExPVykpLFxyXG5dO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgTGV2ZWwxO1xyXG4iLCJpbXBvcnQgQmxvY2sgZnJvbSBcIi4uL21vZGVscy9ibG9ja1wiO1xyXG5pbXBvcnQge0Jsb2NrVHlwZXN9IGZyb20gXCIuLi9jb25zdHNcIjtcclxuXHJcbmNvbnN0IExldmVsMjogKCk9PkJsb2NrW10gPSAoKSA9PiBbXHJcbiAgICAuLi5BcnJheS5mcm9tKEFycmF5KDE1KSwgKHYsIGk6bnVtYmVyKSA9PiBuZXcgQmxvY2soMiArIGksIGksIEJsb2NrVHlwZXMuUkVEKSksXHJcbiAgICAuLi5BcnJheS5mcm9tKEFycmF5KDE1KSwgKHYsIGk6bnVtYmVyKSA9PiBuZXcgQmxvY2soMTcgKyBpLCAxNC1pLCBCbG9ja1R5cGVzLlJFRCkpLFxyXG4gICAgLi4uQXJyYXkuZnJvbShBcnJheSgxNCksICh2LCBpOm51bWJlcikgPT4gbmV3IEJsb2NrKDMgKyBpLCBpLCBCbG9ja1R5cGVzLllFTExPVykpLFxyXG4gICAgLi4uQXJyYXkuZnJvbShBcnJheSgxNCksICh2LCBpOm51bWJlcikgPT4gbmV3IEJsb2NrKDE3ICsgaSwgMTMtaSwgQmxvY2tUeXBlcy5ZRUxMT1cpKSxcclxuICAgIC4uLkFycmF5LmZyb20oQXJyYXkoMTUpLCAodiwgaTpudW1iZXIpID0+IG5ldyBCbG9jaygyICsgaSoyLCAxNSwgQmxvY2tUeXBlcy5HUkVFTikpXHJcbl07XHJcbmV4cG9ydCBkZWZhdWx0IExldmVsMjtcclxuIiwiaW1wb3J0IEJsb2NrIGZyb20gXCIuLi9tb2RlbHMvYmxvY2tcIjtcclxuaW1wb3J0IHtCbG9ja1R5cGVzfSBmcm9tIFwiLi4vY29uc3RzXCI7XHJcblxyXG5jb25zdCBMZXZlbDM6ICgpPT5CbG9ja1tdID0gKCkgPT4gW1xyXG4gICAgLi4uQXJyYXkuZnJvbShBcnJheSgxNSksICh2LCBpOm51bWJlcikgPT4gbmV3IEJsb2NrKDIgKyBpLCAxNy1pLCBCbG9ja1R5cGVzLlJFRCkpLFxyXG4gICAgLi4uQXJyYXkuZnJvbShBcnJheSgxNSksICh2LCBpOm51bWJlcikgPT4gbmV3IEJsb2NrKDE3ICsgaSwgMitpLCBCbG9ja1R5cGVzLlJFRCkpLFxyXG4gICAgLi4uQXJyYXkuZnJvbShBcnJheSgxMyksICh2LCBpOm51bWJlcikgPT4gbmV3IEJsb2NrKDQgKyBpLCAxNy1pLCBCbG9ja1R5cGVzLllFTExPVykpLFxyXG4gICAgLi4uQXJyYXkuZnJvbShBcnJheSgxMyksICh2LCBpOm51bWJlcikgPT4gbmV3IEJsb2NrKDE3ICsgaSwgNCtpLCBCbG9ja1R5cGVzLllFTExPVykpLFxyXG5cclxuICAgIC4uLkFycmF5LmZyb20oQXJyYXkoOSksICh2LCBpOm51bWJlcikgPT4gbmV3IEJsb2NrKDggKyBpLCAxNy1pLCBCbG9ja1R5cGVzLlJFRCkpLFxyXG4gICAgLi4uQXJyYXkuZnJvbShBcnJheSg5KSwgKHYsIGk6bnVtYmVyKSA9PiBuZXcgQmxvY2soMTcgKyBpLCA4K2ksIEJsb2NrVHlwZXMuUkVEKSksXHJcbiAgICAuLi5BcnJheS5mcm9tKEFycmF5KDcpLCAodiwgaTpudW1iZXIpID0+IG5ldyBCbG9jaygxMCArIGksIDE3LWksIEJsb2NrVHlwZXMuWUVMTE9XKSksXHJcbiAgICAuLi5BcnJheS5mcm9tKEFycmF5KDcpLCAodiwgaTpudW1iZXIpID0+IG5ldyBCbG9jaygxNyArIGksIDEwK2ksIEJsb2NrVHlwZXMuWUVMTE9XKSksXHJcblxyXG4gICAgLi4uQXJyYXkuZnJvbShBcnJheSg0KSwgKHYsaTogbnVtYmVyKSA9PiBuZXcgQmxvY2soMytpJTIsIDMrKCsoaTwyKSksIEJsb2NrVHlwZXMuR1JFRU4pKSxcclxuICAgIC4uLkFycmF5LmZyb20oQXJyYXkoNCksICh2LGk6IG51bWJlcikgPT4gbmV3IEJsb2NrKDI5K2klMiwgMysoKyhpPDIpKSwgQmxvY2tUeXBlcy5HUkVFTikpLFxyXG5dO1xyXG5leHBvcnQgZGVmYXVsdCBMZXZlbDM7XHJcbiIsImltcG9ydCBCbG9jayBmcm9tIFwiLi4vbW9kZWxzL2Jsb2NrXCI7XHJcbmltcG9ydCBMZXZlbDEgZnJvbSBcIi4vbGV2ZWwxXCI7XHJcbmltcG9ydCBMZXZlbDIgZnJvbSBcIi4vbGV2ZWwyXCI7XHJcbmltcG9ydCBMZXZlbDMgZnJvbSBcIi4vbGV2ZWwzXCI7XHJcblxyXG5jb25zdCBMRVZFTFM6IEFycmF5PCgpID0+IEJsb2NrW10+ID0gW0xldmVsMSwgTGV2ZWwyLCBMZXZlbDNdO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgTEVWRUxTO1xyXG4iLCJpbXBvcnQgYmFsbCBmcm9tIFwiLi4vbW9kZWxzL2JhbGxcIjtcclxuaW1wb3J0IHBsYW5rIGZyb20gXCIuLi9tb2RlbHMvcGxhbmtcIjtcclxuaW1wb3J0IFJlY3QgZnJvbSBcIi4uL21vZGVscy9yZWN0XCI7XHJcbmltcG9ydCB7Q0FOVkFTX0hFSUdIVCwgQ0FOVkFTX1dJRFRIfSBmcm9tIFwiLi4vY29uc3RzXCI7XHJcbmltcG9ydCBSZW5kZXJlciBmcm9tIFwiLi9yZW5kZXJlclwiO1xyXG5pbXBvcnQgTEVWRUxTIGZyb20gXCIuLi9sZXZlbHMvbGV2ZWxzXCI7XHJcblxyXG5leHBvcnQgY29uc3QgY2FudmFzOiBIVE1MQ2FudmFzRWxlbWVudCA9IDxIVE1MQ2FudmFzRWxlbWVudD5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdjYW52YXMnKTtcclxuY29uc3QgZ2FtZU92ZXJFbDogSFRNTFBhcmFncmFwaEVsZW1lbnQgPSA8SFRNTFBhcmFncmFwaEVsZW1lbnQ+ZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2dhbWUtb3ZlcicpO1xyXG5sZXQgX2lzR2FtZU92ZXI6IGJvb2xlYW4gPSBmYWxzZTtcclxuZXhwb3J0IGNvbnN0IGlzR2FtZU92ZXI6ICgpPT5ib29sZWFuID0gKCk9Pl9pc0dhbWVPdmVyO1xyXG5leHBvcnQgY29uc3QgZ2FtZU92ZXIgPSAoKSA9PiB7XHJcbiAgICBnYW1lT3ZlckVsLnN0eWxlLmRpc3BsYXkgPSAnJztcclxuICAgIF9pc0dhbWVPdmVyID0gdHJ1ZTtcclxufTtcclxuZXhwb3J0IGNvbnN0IG5ld0dhbWUgPSAoKSA9PiB7XHJcbiAgICBfaXNHYW1lT3ZlciA9IGZhbHNlO1xyXG4gICAgZ2FtZU92ZXJFbC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gICAgLy8gaW5pdCBiYWxsXHJcbiAgICBiYWxsLnggPSA1MDA7XHJcbiAgICBiYWxsLnkgPSA1MDA7XHJcbiAgICBiYWxsLnNwZWVkWSA9IGJhbGwuc3BlZWRZQXQoYmFsbC55KTtcclxuICAgIGJhbGwuc3BlZWRYID0gMDtcclxuICAgIC8vIGluaXQgcGxhbmtcclxuICAgIHBsYW5rLnJlY3QgPSBuZXcgUmVjdChDQU5WQVNfV0lEVEggLyAyIC0gOTUsIENBTlZBU19IRUlHSFQgLSA5MCwgMTkwLCAxOCk7XHJcbiAgICAvLyBpbml0IGxldmVsXHJcbiAgICBSZW5kZXJlci5hY3RpdmVMZXZlbCA9IExFVkVMU1tSZW5kZXJlci5sZXZlbElkeF0oKTtcclxufTtcclxuIiwiaW1wb3J0IHBsYW5rIGZyb20gXCIuLi9tb2RlbHMvcGxhbmtcIjtcclxuaW1wb3J0IGJhbGwgZnJvbSBcIi4uL21vZGVscy9iYWxsXCI7XHJcbmltcG9ydCB7U3BlZWRNb2Rlc30gZnJvbSBcIi4uL2NvbnN0c1wiO1xyXG5pbXBvcnQge2lzR2FtZU92ZXIsIG5ld0dhbWV9IGZyb20gXCIuL2RvbVwiO1xyXG5cclxuZXhwb3J0IGNvbnN0IGluaXRLZXlib2FyZCA9ICgpID0+IHtcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBlID0+IHtcclxuICAgICAgICBzd2l0Y2ggKGUuY29kZSkge1xyXG4gICAgICAgICAgICBjYXNlICdBcnJvd1JpZ2h0JzpcclxuICAgICAgICAgICAgICAgIHBsYW5rLnNwZWVkID0gcGxhbmsuU1BFRUQ7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnQXJyb3dMZWZ0JzpcclxuICAgICAgICAgICAgICAgIHBsYW5rLnNwZWVkID0gLXBsYW5rLlNQRUVEO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ0Fycm93VXAnOlxyXG4gICAgICAgICAgICAgICAgYmFsbC5zcGVlZE1vZGUgPSBTcGVlZE1vZGVzLkhJR0hfU1BFRUQ7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnU3BhY2UnOlxyXG4gICAgICAgICAgICAgICAgaWYoaXNHYW1lT3ZlcigpKSBuZXdHYW1lKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIGUgPT4ge1xyXG4gICAgICAgIHN3aXRjaCAoZS5jb2RlKSB7XHJcbiAgICAgICAgICAgIGNhc2UgJ0Fycm93UmlnaHQnOlxyXG4gICAgICAgICAgICAgICAgaWYgKHBsYW5rLnNwZWVkID09PSBwbGFuay5TUEVFRCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHBsYW5rLnNwZWVkID0gMDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdBcnJvd0xlZnQnOlxyXG4gICAgICAgICAgICAgICAgaWYgKHBsYW5rLnNwZWVkID09PSAtcGxhbmsuU1BFRUQpIHtcclxuICAgICAgICAgICAgICAgICAgICBwbGFuay5zcGVlZCA9IDA7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnQXJyb3dVcCc6XHJcbiAgICAgICAgICAgICAgICBiYWxsLnNwZWVkTW9kZSA9IFNwZWVkTW9kZXMuUkVHVUxBUjtcclxuICAgICAgICB9XHJcbiAgICB9KVxyXG59O1xyXG4iLCJpbXBvcnQgYmFsbCBmcm9tICcuLi9tb2RlbHMvYmFsbCc7XHJcbmltcG9ydCBwbGFuayBmcm9tICcuLi9tb2RlbHMvcGxhbmsnO1xyXG5pbXBvcnQge0NBTlZBU19IRUlHSFQsIENBTlZBU19XSURUSCwgR1JBVklUWSwgU3BlZWRNb2Rlc30gZnJvbSBcIi4uL2NvbnN0c1wiO1xyXG5pbXBvcnQgTEVWRUxTIGZyb20gXCIuLi9sZXZlbHMvbGV2ZWxzXCI7XHJcbmltcG9ydCBCbG9jayBmcm9tIFwiLi4vbW9kZWxzL2Jsb2NrXCI7XHJcbmltcG9ydCB7Z2FtZU92ZXJ9IGZyb20gXCIuL2RvbVwiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUmVuZGVyZXIge1xyXG4gICAgY2FudmFzOiBIVE1MQ2FudmFzRWxlbWVudDtcclxuICAgIGN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEO1xyXG4gICAgcnVuOiBib29sZWFuID0gZmFsc2U7XHJcbiAgICBpbWdNZW1vOiB7IFtzcmM6IHN0cmluZ106IEhUTUxJbWFnZUVsZW1lbnQgfSA9IHt9O1xyXG4gICAgc3RhdGljIGFjdGl2ZUxldmVsOiBCbG9ja1tdO1xyXG4gICAgc3RhdGljIGxldmVsSWR4OiBudW1iZXIgPSAwO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGNhbnZhczogSFRNTENhbnZhc0VsZW1lbnQpIHtcclxuICAgICAgICB0aGlzLmNhbnZhcyA9IGNhbnZhcztcclxuICAgICAgICB0aGlzLmNhbnZhcy53aWR0aCA9IENBTlZBU19XSURUSDtcclxuICAgICAgICB0aGlzLmNhbnZhcy5oZWlnaHQgPSBDQU5WQVNfSEVJR0hUO1xyXG4gICAgICAgIHRoaXMuY3R4ID0gPENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRD50aGlzLmNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xyXG4gICAgICAgIFJlbmRlcmVyLmFjdGl2ZUxldmVsID0gTEVWRUxTW1JlbmRlcmVyLmxldmVsSWR4XSgpO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXJ0KCkge1xyXG4gICAgICAgIHRoaXMucnVuID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLnJlbmRlckxvb3AoKTtcclxuICAgIH1cclxuXHJcbiAgICBwYXVzZSgpIHtcclxuICAgICAgICB0aGlzLnJ1biA9IGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgcmVuZGVyTG9vcCgpIHtcclxuICAgICAgICBpZiAoIXRoaXMucnVuKSByZXR1cm47XHJcbiAgICAgICAgdGhpcy5kcmF3QmFsbCgpO1xyXG4gICAgICAgIHRoaXMuZHJhd1BsYW5rKCk7XHJcbiAgICAgICAgdGhpcy5kcmF3QmxvY2tzKCk7XHJcbiAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHRoaXMucmVuZGVyTG9vcC5iaW5kKHRoaXMpKTtcclxuICAgIH1cclxuXHJcbiAgICBkcmF3QmFsbCgpIHtcclxuICAgICAgICBiYWxsLm1vdmUoKTtcclxuICAgICAgICBpZihiYWxsLnNwZWVkTW9kZSA9PSBTcGVlZE1vZGVzLkhJR0hfU1BFRUQpIHtcclxuICAgICAgICAgICAgYmFsbC5tb3ZlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmKGJhbGwueSA+IENBTlZBU19IRUlHSFQpIHtcclxuICAgICAgICAgICAgZ2FtZU92ZXIoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5jdHguYmVnaW5QYXRoKCk7XHJcbiAgICAgICAgdGhpcy5jdHguY2xlYXJSZWN0KDAsIDAsIENBTlZBU19XSURUSCwgQ0FOVkFTX0hFSUdIVCk7XHJcbiAgICAgICAgdGhpcy5jdHguZmlsbFN0eWxlID0gYmFsbC5DT0xPUjtcclxuICAgICAgICB0aGlzLmN0eC5hcmMoYmFsbC54LCBiYWxsLnksIGJhbGwuUkFESVVTLCAwLCBNYXRoLlBJICogMik7XHJcbiAgICAgICAgdGhpcy5jdHguZmlsbCgpO1xyXG4gICAgICAgIHRoaXMuY3R4LmNsb3NlUGF0aCgpO1xyXG4gICAgfVxyXG4gICAgZHJhd1BsYW5rKCkge1xyXG4gICAgICAgIHBsYW5rLm1vdmUoKTtcclxuICAgICAgICB0aGlzLmN0eC5iZWdpblBhdGgoKTtcclxuICAgICAgICB0aGlzLmN0eC5maWxsU3R5bGUgPSBwbGFuay5DT0xPUjtcclxuICAgICAgICB0aGlzLmN0eC5maWxsUmVjdChwbGFuay5yZWN0LmxlZnQoKSwgcGxhbmsucmVjdC50b3AoKSwgcGxhbmsucmVjdC53aWR0aCgpLCBwbGFuay5yZWN0LmhlaWdodCgpKTtcclxuICAgICAgICB0aGlzLmN0eC5jbG9zZVBhdGgoKTtcclxuICAgICAgICBpZiAoYmFsbC5jaGVja0hpdChwbGFuay5yZWN0KSkge1xyXG4gICAgICAgICAgICBiYWxsLnkgPSBwbGFuay5yZWN0LnRvcCgpIC0gYmFsbC5SQURJVVM7XHJcbiAgICAgICAgICAgIGJhbGwuc3BlZWRZID0gLWJhbGwuc3BlZWRZQXQoYmFsbC55KSAtIEdSQVZJVFk7XHJcbiAgICAgICAgICAgIGJhbGwuc3BlZWRYICs9IE1hdGguc2lnbihwbGFuay5zcGVlZCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZHJhd0Jsb2NrcygpIHtcclxuICAgICAgICBsZXQgbGV2ZWxVcDogYm9vbGVhbiA9IHRydWU7XHJcbiAgICAgICAgZm9yIChjb25zdCBibG9jayBvZiBSZW5kZXJlci5hY3RpdmVMZXZlbCkge1xyXG4gICAgICAgICAgICBpZiAoYmxvY2sucHJvZ3Jlc3MgPiBibG9jay50eXBlKSBjb250aW51ZTtcclxuICAgICAgICAgICAgbGV2ZWxVcCA9IGZhbHNlO1xyXG4gICAgICAgICAgICB0aGlzLmxvYWRJbWFnZShibG9jay5zcmMoKSkudGhlbihpbWcgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qge3JlY3R9ID0gYmxvY2s7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmN0eC5kcmF3SW1hZ2UoaW1nLCByZWN0LmxlZnQoKSwgcmVjdC50b3AoKSwgcmVjdC53aWR0aCgpLCByZWN0LmhlaWdodCgpKTtcclxuICAgICAgICAgICAgICAgIGlmIChiYWxsLmNoZWNrSGl0KHJlY3QpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYmxvY2sucHJvZ3Jlc3MrKztcclxuICAgICAgICAgICAgICAgICAgICBpZiAoYmFsbC55IC0gcmVjdC50b3AoKSA8IGJhbGwueCAtIHJlY3QubGVmdCgpICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhbGwueSAtIHJlY3QudG9wKCkgPCByZWN0LnJpZ2h0KCkgLSBiYWxsLnggfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVjdC5ib3R0b20oKSAtIGJhbGwueSA8IGJhbGwueCAtIHJlY3QubGVmdCgpICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlY3QuYm90dG9tKCkgLSBiYWxsLnkgPCByZWN0LnJpZ2h0KCkgLSBiYWxsLngpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmFsbC5zcGVlZFkgPSBiYWxsLnNwZWVkWSAqIC0xIC0gR1JBVklUWTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBiYWxsLnNwZWVkWCAqPSAtMTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAobGV2ZWxVcCkge1xyXG4gICAgICAgICAgICBSZW5kZXJlci5sZXZlbElkeCA9IChSZW5kZXJlci5sZXZlbElkeCsxKSAlIExFVkVMUy5sZW5ndGg7XHJcbiAgICAgICAgICAgIFJlbmRlcmVyLmFjdGl2ZUxldmVsID0gTEVWRUxTW1JlbmRlcmVyLmxldmVsSWR4XSgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBsb2FkSW1hZ2UodXJsOiBzdHJpbmcpOiBQcm9taXNlPEhUTUxJbWFnZUVsZW1lbnQ+IHtcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2U8SFRNTEltYWdlRWxlbWVudD4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5pbWdNZW1vW3VybF0pIHtcclxuICAgICAgICAgICAgICAgIHJlc29sdmUodGhpcy5pbWdNZW1vW3VybF0pO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaW1nID0gbmV3IEltYWdlKCk7XHJcbiAgICAgICAgICAgICAgICBpbWcub25sb2FkID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaW1nTWVtb1t1cmxdID0gaW1nO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoaW1nKTtcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICBpbWcub25lcnJvciA9ICgpID0+IHJlamVjdCgnaW1hZ2Ugbm90IGxvYWRlZCcpO1xyXG4gICAgICAgICAgICAgICAgaW1nLnNyYyA9IHVybDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxufVxyXG4iLCJpbXBvcnQge0NBTlZBU19XSURUSCwgR1JBVklUWSwgU3BlZWRNb2Rlc30gZnJvbSBcIi4uL2NvbnN0c1wiO1xyXG5pbXBvcnQgUmVjdCBmcm9tIFwiLi9yZWN0XCI7XHJcblxyXG5jbGFzcyBCYWxsIHtcclxuICAgIHJlYWRvbmx5IFJBRElVUzogbnVtYmVyID0gMTU7XHJcbiAgICByZWFkb25seSBDT0xPUjogc3RyaW5nID0gJyNmZmZmZmYnO1xyXG4gICAgeDogbnVtYmVyO1xyXG4gICAgeTogbnVtYmVyO1xyXG4gICAgc3BlZWRYOiBudW1iZXIgPSAwO1xyXG4gICAgc3BlZWRZOiBudW1iZXIgPSAwO1xyXG4gICAgc3BlZWRNb2RlOiBTcGVlZE1vZGVzID0gU3BlZWRNb2Rlcy5SRUdVTEFSO1xyXG4gICAgY29uc3RydWN0b3IoeDogbnVtYmVyLCB5OiBudW1iZXIpIHtcclxuICAgICAgICB0aGlzLnggPSB4O1xyXG4gICAgICAgIHRoaXMueSA9IHk7XHJcbiAgICAgICAgdGhpcy5zcGVlZFkgPSB0aGlzLnNwZWVkWUF0KHkpO1xyXG4gICAgfVxyXG4gICAgbW92ZSgpIHtcclxuICAgICAgICB0aGlzLnNwZWVkWSArPSBHUkFWSVRZO1xyXG4gICAgICAgIHRoaXMueCArPSB0aGlzLnNwZWVkWDtcclxuICAgICAgICB0aGlzLnkgKz0gdGhpcy5zcGVlZFk7XHJcbiAgICAgICAgaWYodGhpcy54K3RoaXMuUkFESVVTID49IENBTlZBU19XSURUSCkge1xyXG4gICAgICAgICAgICB0aGlzLnggPSBDQU5WQVNfV0lEVEgtdGhpcy5SQURJVVM7XHJcbiAgICAgICAgICAgIHRoaXMuc3BlZWRYICo9IC0xO1xyXG4gICAgICAgIH1lbHNlIGlmKHRoaXMueC10aGlzLlJBRElVUyA8PSAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMueCA9IHRoaXMuUkFESVVTO1xyXG4gICAgICAgICAgICB0aGlzLnNwZWVkWCAqPSAtMTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBjaGVja0hpdChyZWN0OiBSZWN0KSB7XHJcbiAgICAgICAgcmVjdCA9IG5ldyBSZWN0KHJlY3QubGVmdCgpIC0gdGhpcy5SQURJVVMsIHJlY3QudG9wKCkgLSB0aGlzLlJBRElVUywgcmVjdC53aWR0aCgpICsgMiAqIHRoaXMuUkFESVVTLCByZWN0LmhlaWdodCgpICsgMiAqIHRoaXMuUkFESVVTKTtcclxuICAgICAgICByZXR1cm4gdGhpcy54ID4gcmVjdC5sZWZ0KCkgJiYgdGhpcy54IDwgcmVjdC5yaWdodCgpICYmIHRoaXMueSA+IHJlY3QudG9wKCkgJiYgdGhpcy55IDwgcmVjdC5ib3R0b20oKTtcclxuICAgIH1cclxuICAgIHNwZWVkWUF0KHk6IG51bWJlcikge1xyXG4gICAgICAgIC8vIGYnJyh0KSA9IGc7IGYnKHQpID0gdGc7IGYodCkgPSAuNWcodF4yKSA9IHlcclxuICAgICAgICAvLyB5LyguNWcpID0gdF4yID0+IHNxcnQoeS8oMC41ZykpID0gdFxyXG4gICAgICAgIC8vIHYgPSBmJyh0KSA9IGYnKHNxcnQoeS8oMC41ZykpKSA9IHNxcnQoeS8oMC41ZykpZ1xyXG4gICAgICAgIHJldHVybiBNYXRoLnNxcnQoMiooeSAtIHRoaXMuUkFESVVTKS9HUkFWSVRZKSAqIEdSQVZJVFk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IG5ldyBCYWxsKDUwMCwgNTAwKTtcclxuIiwiaW1wb3J0IHtCbG9ja1R5cGVzfSBmcm9tIFwiLi4vY29uc3RzXCI7XHJcbmltcG9ydCBSZWN0IGZyb20gXCIuL3JlY3RcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEJsb2NrIHtcclxuICAgIHN0YXRpYyByZWFkb25seSBXSURUSCA9IDMwO1xyXG4gICAgcmVjdDogUmVjdDtcclxuICAgIHR5cGU6IEJsb2NrVHlwZXM7XHJcbiAgICBwcm9ncmVzczogbnVtYmVyID0gMDtcclxuICAgIG5hbWU6IHN0cmluZztcclxuICAgIGNvbnN0cnVjdG9yKHg6IG51bWJlciwgeTogbnVtYmVyLCB0eXBlOiBCbG9ja1R5cGVzKSB7XHJcbiAgICAgICAgdGhpcy5yZWN0ID0gbmV3IFJlY3QoeCAqIEJsb2NrLldJRFRILCB5ICogQmxvY2suV0lEVEgsIEJsb2NrLldJRFRILCBCbG9jay5XSURUSCk7XHJcbiAgICAgICAgdGhpcy50eXBlID0gdHlwZTtcclxuICAgICAgICB0aGlzLm5hbWUgPSBbJ2dyZWVuJywgJ3llbGxvdycsICdyZWQnXVt0eXBlXTtcclxuICAgIH1cclxuICAgIGhpdCgpIHtcclxuICAgICAgICB0aGlzLnByb2dyZXNzKys7XHJcbiAgICB9XHJcbiAgICBzcmMoKSB7XHJcbiAgICAgICAgcmV0dXJuIGAuL21lZGlhL2Jsb2NrLiR7dGhpcy5uYW1lfS4ke3RoaXMucHJvZ3Jlc3MrMX0ucG5nYDtcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQge0NBTlZBU19IRUlHSFQsIENBTlZBU19XSURUSH0gZnJvbSBcIi4uL2NvbnN0c1wiO1xyXG5pbXBvcnQgUmVjdCBmcm9tIFwiLi9yZWN0XCI7XHJcblxyXG5jbGFzcyBQbGFuayB7XHJcbiAgICByZWN0OiBSZWN0O1xyXG4gICAgcmVhZG9ubHkgQ09MT1I6IHN0cmluZyA9ICcjODNmMGViJztcclxuICAgIHJlYWRvbmx5IFNQRUVEID0gMTY7XHJcbiAgICBzcGVlZDogbnVtYmVyID0gMDtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICB0aGlzLnJlY3QgPSBuZXcgUmVjdChDQU5WQVNfV0lEVEggLyAyIC0gOTUsIENBTlZBU19IRUlHSFQgLSA5MCwgMTkwLCAxOCk7XHJcblxyXG4gICAgfVxyXG4gICAgbW92ZSgpIHtcclxuICAgICAgICB0aGlzLnJlY3Quc2V0TGVmdChNYXRoLm1pbihNYXRoLm1heCgwLCB0aGlzLnJlY3QubGVmdCgpICsgdGhpcy5zcGVlZCksIENBTlZBU19XSURUSCAtIHRoaXMucmVjdC53aWR0aCgpKSk7XHJcbiAgICB9XHJcblxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBuZXcgUGxhbmsoKTtcclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUmVjdCB7XHJcbiAgICBwcml2YXRlIHg6IG51bWJlcjtcclxuICAgIHByaXZhdGUgeTogbnVtYmVyO1xyXG4gICAgcHJpdmF0ZSB3OiBudW1iZXI7XHJcbiAgICBwcml2YXRlIGg6IG51bWJlcjtcclxuICAgIGNvbnN0cnVjdG9yKHg6IG51bWJlciwgeTogbnVtYmVyLCB3OiBudW1iZXIsIGg6IG51bWJlcikge1xyXG4gICAgICAgIHRoaXMueCA9IHg7XHJcbiAgICAgICAgdGhpcy55ID0geTtcclxuICAgICAgICB0aGlzLncgPSB3O1xyXG4gICAgICAgIHRoaXMuaCA9IGg7XHJcbiAgICB9XHJcbiAgICB0b3AoKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gdGhpcy55O1xyXG4gICAgfVxyXG4gICAgbGVmdCgpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiB0aGlzLng7XHJcbiAgICB9XHJcbiAgICByaWdodCgpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnggKyB0aGlzLnc7XHJcbiAgICB9XHJcbiAgICBib3R0b20oKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gdGhpcy55ICsgdGhpcy5oO1xyXG4gICAgfVxyXG4gICAgd2lkdGgoKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gdGhpcy53O1xyXG4gICAgfVxyXG4gICAgaGVpZ2h0KCk6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaDtcclxuICAgIH1cclxuICAgIHNldFRvcCh0b3A6IG51bWJlcikge1xyXG4gICAgICAgIHRoaXMueSA9IHRvcDtcclxuICAgIH1cclxuICAgIHNldExlZnQobGVmdDogbnVtYmVyKSB7XHJcbiAgICAgICAgdGhpcy54ID0gbGVmdDtcclxuICAgIH1cclxuICAgIHNldEJvdHRvbShib3R0b206IG51bWJlcikge1xyXG4gICAgICAgIHRoaXMueSA9IGJvdHRvbSAtIHRoaXMuaDtcclxuICAgIH1cclxuICAgIHNldFJpZ2h0KHJpZ2h0OiBudW1iZXIpIHtcclxuICAgICAgICB0aGlzLnggPSByaWdodCAtIHRoaXMudztcclxuICAgIH1cclxuICAgIHNldFdpZHRoKHdpZHRoOiBudW1iZXIpIHtcclxuICAgICAgICB0aGlzLncgPSB3aWR0aDtcclxuICAgIH1cclxuICAgIHNldEhlaWdodChoZWlnaHQ6IG51bWJlcil7XHJcbiAgICAgICAgdGhpcy5oID0gaGVpZ2h0O1xyXG4gICAgfVxyXG59XHJcbiJdfQ==
